<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <title>FutureMind | Eternal Hub</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body>
    <header>
        <div class="nav-container">
            <a href="index.html" class="logo">üöÄ FutureMind</a>
            <nav><a href="submit.html" class="btn-submit">+ –ù–∏–π—Ç–ª—ç—Ö</a></nav>
        </div>
    </header>

    <div class="container">
        <div id="home-scene" class="scene active">
            <h1 style="text-align:center;">–°—ç–¥—ç–≤ —Å–æ–Ω–≥–æ–Ω–æ —É—É</h1>
            <div class="scene-grid">
                <div class="scene-card" onclick="showCategory('news')">ü§ñ AI –¢–µ—Ö–Ω–æ–ª–æ–≥–∏</div>
                <div class="scene-card" onclick="showCategory('tesla')">‚ö° Tesla –≠–Ω–µ—Ä–≥–∏</div>
                <div class="scene-card" onclick="showCategory('science')">üî¨ –®–∏–Ω–∂–ª—ç—Ö —É—Ö–∞–∞–Ω</div>
            </div>
        </div>

        <div id="list-scene" class="scene">
            <button class="back-btn" onclick="location.reload()">‚Üê –ë—É—Ü–∞—Ö</button>
            <h1 id="cat-title"></h1>
            <div id="spawn-area"></div>
        </div>
    </div>

    <script>
        // üî• Firebase-—ç—ç —ç–Ω–¥ —Ç–æ—Ö–∏—Ä—É—É–ª–Ω–∞ (“Æ–Ω—ç–≥“Ø–π)
        const firebaseConfig = {
            databaseURL: "https://–ß–ò–ù–ò–ô-–¢”®–°–õ–ò–ô–ù-–ù–≠–†.firebaseio.com" 
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function showCategory(category) {
            document.getElementById('home-scene').classList.remove('active');
            document.getElementById('list-scene').classList.add('active');
            document.getElementById('cat-title').innerText = category.toUpperCase();
            
            const spawnArea = document.getElementById('spawn-area');
            
            // Firebase-—ç—ç—Å –º—ç–¥—ç—ç–ª—ç–ª —É–Ω—à–∏—Ö
            db.ref('posts').on('value', (snapshot) => {
                spawnArea.innerHTML = "";
                const data = snapshot.val();
                if (!data) return spawnArea.innerHTML = "–ù–∏–π—Ç–ª—ç–ª –∞–ª–≥–∞.";

                Object.keys(data).reverse().forEach(key => {
                    const post = data[key];
                    if (post.category === category) {
                        const card = document.createElement('div');
                        card.className = 'post-item spawn-anim';
                        card.innerHTML = `
                            <div class="post-content">
                                <p>${post.content}</p>
                                ${post.image ? `<img src="${post.image}" class="post-img">` : ''}
                            </div>
                            <div class="post-footer">
                                üïí ${post.date}
                                <button class="admin-del" onclick="deletePost('${key}')">–£—Å—Ç–≥–∞—Ö (–ê–¥–º–∏–Ω)</button>
                            </div>
                        `;
                        spawnArea.appendChild(card);
                    }
                });
            });
        }

        // üõ°Ô∏è –ê–¥–º–∏–Ω —É—Å—Ç–≥–∞—Ö —Ñ—É–Ω–∫—Ü
        function deletePost(postId) {
            const adminCode = prompt("–ê–¥–º–∏–Ω –Ω—É—É—Ü –∫–æ–¥—ã–≥ –æ—Ä—É—É–ª–Ω–∞ —É—É:");
            const SECRET_CODE = "mandri123"; // –≠–Ω—ç —á–∏–Ω–∏–π —É—Å—Ç–≥–∞—Ö –Ω—É—É—Ü –∫–æ–¥

            if (adminCode === SECRET_CODE) {
                db.ref('posts/' + postId).remove();
                alert("–ê–º–∂–∏–ª—Ç—Ç–∞–π —É—Å—Ç–≥–∞–≥–¥–ª–∞–∞!");
            } else {
                alert("–ù—É—É—Ü –∫–æ–¥ –±—É—Ä—É—É –±–∞–π–Ω–∞!");
            }
        }
    </script>
</body>
</html>