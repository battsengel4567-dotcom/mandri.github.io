async function savePost() {
    const token = "ЧИНИЙ_GITHUB_TOKEN_ЭНД"; // Token-оо энд тавь
    const repo = "battsengel4567-dotcom/mandri.github.io";
    const path = "posts.json";

    const content = document.getElementById('msg').value;
    const category = document.getElementById('cat').value;
    const image = document.getElementById('img').value;

    if (!content) return alert("Текст бичнэ үү!");

    try {
        // 1. Одоо байгаа өгөгдлийг татаж авах
        const res = await fetch(`https://api.github.com/repos/${repo}/contents/${path}`, {
            headers: { "Authorization": `token ${token}` }
        });
        const fileData = await res.json();
        const posts = JSON.parse(atob(fileData.content));

        // 2. Шинэ нийтлэлийг нэмэх (Spawn data)
        posts.push({
            id: Date.now(),
            category: category,
            content: content,
            image: image,
            date: new Date().toLocaleString()
        });

        // 3. GitHub руу буцааж хадгалах (Self-update)
        const updateRes = await fetch(`https://api.github.com/repos/${repo}/contents/${path}`, {
            method: "PUT",
            headers: { 
                "Authorization": `token ${token}`,
                "Content-Type": "application/json" 
            },
            body: JSON.stringify({
                message: "New post spawned",
                content: btoa(unescape(encodeURIComponent(JSON.stringify(posts, null, 2)))),
                sha: fileData.sha
            })
        });

        if (updateRes.ok) {
            alert("Амжилттай нийтлэгдлээ! Сайт 1 минутын дараа шинэчлэгдэнэ.");
            window.location.href = "index.html";
        }
    } catch (e) {
        alert("Алдаа гарлаа: " + e.message);
    }
}